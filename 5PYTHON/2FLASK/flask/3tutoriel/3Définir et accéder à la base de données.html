<!DOCTYPE html>
<!-- saved from url=(0090)https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#initialize-the-database-file -->
<html lang="fr" data-content_root="../../" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Définir et accéder à la base de données — Documentation en flacon ( 3.0.x )</title>
    <link rel="stylesheet" type="text/css" href="./3Définir et accéder à la base de données_files/pygments.css">
    <link rel="stylesheet" type="text/css" href="./3Définir et accéder à la base de données_files/flask.css">
    <link rel="stylesheet" type="text/css" href="./3Définir et accéder à la base de données_files/tabs.css">
    <link rel="stylesheet" type="text/css" href="./3Définir et accéder à la base de données_files/badge_only.css">
    <script src="./3Définir et accéder à la base de données_files/documentation_options.js.téléchargement"></script>
    <script src="./3Définir et accéder à la base de données_files/doctools.js.téléchargement"></script>
    <script src="./3Définir et accéder à la base de données_files/sphinx_highlight.js.téléchargement"></script>
    <script async="async" src="./3Définir et accéder à la base de données_files/readthedocs-doc-embed.js.téléchargement"></script>
    <link rel="icon" href="https://flask.palletsprojects.com/en/3.0.x/_static/shortcut-icon.png">
    <link rel="index" title="Indice" href="https://flask.palletsprojects.com/en/3.0.x/genindex/">
    <link rel="search" title="Rechercher" href="https://flask.palletsprojects.com/en/3.0.x/search/">
    <link rel="next" title="Plans et vues" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/views/">
    <link rel="prev" title="Configuration de l&#39;application" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/factory/"> 
  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="./3Définir et accéder à la base de données_files/readthedocs-doc-embed.css" type="text/css">

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/docs/", "features": {"docsearch_disabled": true}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "tutorial/database", "programming_language": "py", "project": "flask", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "flask", "user_analytics_code": "", "version": "3.0.x"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="./3Définir et accéder à la base de données_files/readthedocs-analytics.js.téléchargement" async="async"></script>

<!-- end RTD <extrahead> -->
<script type="text/javascript" src="./3Définir et accéder à la base de données_files/jquery.js.téléchargement"></script><script src="./3Définir et accéder à la base de données_files/js" type="text/javascript" async=""></script><script src="./3Définir et accéder à la base de données_files/ethicalads.min.js.téléchargement" type="text/javascript" async="" id="ethicaladsjs"></script><style type="text/css">/* Copyright 2021 Google Inc. All Rights Reserved. */<br>.goog-te-banner-frame{left:0px;top:0px;height:39px;width:100%;z-index:10000001;position:fixed;border:none;border-bottom:1px solid #6b90da;margin:0;-moz-box-shadow:0 0 8px 1px #999999;-webkit-box-shadow:0 0 8px 1px #999999;box-shadow:0 0 8px 1px #999999;_position:absolute}.goog-te-menu-frame{z-index:10000002;position:fixed;border:none;-moz-box-shadow:0 3px 8px 2px #999999;-webkit-box-shadow:0 3px 8px 2px #999999;box-shadow:0 3px 8px 2px #999999;_position:absolute}.goog-te-ftab-frame{z-index:10000000;border:none;margin:0}.goog-te-gadget{font-family:arial;font-size:11px;color:#666;white-space:nowrap}.goog-te-gadget img{vertical-align:middle;border:none}.goog-te-gadget-simple{background-color:#fff;border-left:1px solid #d5d5d5;border-top:1px solid #9b9b9b;border-bottom:1px solid #e8e8e8;border-right:1px solid #d5d5d5;font-size:10pt;display:inline-block;padding-top:1px;padding-bottom:2px;cursor:pointer;zoom:1;*display:inline}.goog-te-gadget-icon{margin-left:2px;margin-right:2px;width:19px;height:19px;border:none;vertical-align:middle}.goog-te-combo{margin-left:4px;margin-right:4px;vertical-align:baseline;*vertical-align:middle}.goog-te-gadget .goog-te-combo{margin:4px 0}.goog-logo-link,.goog-logo-link:link,.goog-logo-link:visited,.goog-logo-link:hover,.goog-logo-link:active{font-size:12px;font-weight:bold;color:#444;text-decoration:none}.goog-te-banner .goog-logo-link,.goog-close-link{display:block;margin:0px 10px}.goog-te-banner .goog-logo-link{padding-top:2px;padding-left:4px}.goog-te-combo,.goog-te-banner *,.goog-te-ftab *,.goog-te-menu *,.goog-te-menu2 *,.goog-te-balloon *{font-family:arial;font-size:10pt}.goog-te-banner{margin:0;background-color:#e4effb;overflow:hidden}.goog-te-banner img{border:none}.goog-te-banner-content{color:#000}.goog-te-banner-content img{vertical-align:middle}.goog-te-banner-info{color:#666;vertical-align:top;margin-top:0px;font-size:7pt}.goog-te-banner-margin{width:8px}.goog-te-button{border-color:#e7e7e7;border-style:none solid solid none;border-width:0 1px 1px 0}.goog-te-button div{border-color:#cccccc #999999 #999999 #cccccc;border-right:1px solid #999999;border-style:solid;border-width:1px;height:20px}.goog-te-button button{background:transparent;border:none;cursor:pointer;height:20px;overflow:hidden;margin:0;vertical-align:top;white-space:nowrap}.goog-te-button button:active{background:none repeat scroll 0 0 #cccccc}.goog-te-ftab{margin:0px;background-color:#fff;white-space:nowrap}.goog-te-ftab-link{text-decoration:none;font-weight:bold;font-size:10pt;border:1px outset #888;padding:6px 10px;white-space:nowrap;position:absolute;left:0px;top:0px}.goog-te-ftab-link img{margin-left:2px;margin-right:2px;width:19px;height:19px;border:none;vertical-align:middle}.goog-te-ftab-link span{text-decoration:underline;margin-left:2px;margin-right:2px;vertical-align:middle}.goog-float-top .goog-te-ftab-link{padding:2px 2px;border-top-width:0px}.goog-float-bottom .goog-te-ftab-link{padding:2px 2px;border-bottom-width:0px}.goog-te-menu-value{text-decoration:none;color:#0000cc;white-space:nowrap;margin-left:4px;margin-right:4px}.goog-te-menu-value span{text-decoration:underline}.goog-te-menu-value img{margin-left:2px;margin-right:2px}.goog-te-gadget-simple .goog-te-menu-value{color:#000}.goog-te-gadget-simple .goog-te-menu-value span{text-decoration:none}.goog-te-menu{background-color:#ffffff;text-decoration:none;border:2px solid #c3d9ff;overflow-y:scroll;overflow-x:hidden;position:absolute;left:0;top:0}.goog-te-menu-item{padding:3px;text-decoration:none}.goog-te-menu-item,.goog-te-menu-item:link{color:#0000cc;background:#ffffff}.goog-te-menu-item:visited{color:#551a8b}.goog-te-menu-item:hover{background:#c3d9ff}.goog-te-menu-item:active{color:#0000cc}.goog-te-menu2{background-color:#ffffff;text-decoration:none;border:1px solid #6b90da;overflow:hidden;padding:4px}.goog-te-menu2-colpad{width:16px}.goog-te-menu2-separator{margin:6px 0;height:1px;background-color:#aaa;overflow:hidden}.goog-te-menu2-item div,.goog-te-menu2-item-selected div{padding:4px}.goog-te-menu2-item .indicator{display:none}.goog-te-menu2-item-selected .indicator{display:auto}.goog-te-menu2-item-selected .text{padding-left:4px;padding-right:4px}.goog-te-menu2-item,.goog-te-menu2-item-selected{text-decoration:none}.goog-te-menu2-item div,.goog-te-menu2-item:link div,.goog-te-menu2-item:visited div,.goog-te-menu2-item:active div{color:#0000cc;background:#ffffff}.goog-te-menu2-item:hover div{color:#ffffff;background:#3366cc}.goog-te-menu2-item-selected div,.goog-te-menu2-item-selected:link div,.goog-te-menu2-item-selected:visited div,.goog-te-menu2-item-selected:hover div,.goog-te-menu2-item-selected:active div{color:#000;font-weight:bold}.goog-te-balloon{background-color:#ffffff;overflow:hidden;padding:8px;border:none;-moz-border-radius:10px;border-radius:10px}.goog-te-balloon-frame{background-color:#ffffff;border:1px solid #6b90da;-moz-box-shadow:0 3px 8px 2px #999999;-webkit-box-shadow:0 3px 8px 2px #999999;box-shadow:0 3px 8px 2px #999999;-moz-border-radius:8px;border-radius:8px}.goog-te-balloon img{border:none}.goog-te-balloon-text{margin-top:6px}.goog-te-balloon-zippy{margin-top:6px;white-space:nowrap}.goog-te-balloon-zippy *{vertical-align:middle}.goog-te-balloon-zippy .minus{background-image:url(//www.google.com/images/zippy_minus_sm.gif)}.goog-te-balloon-zippy .plus{background-image:url(//www.google.com/images/zippy_plus_sm.gif)}.goog-te-balloon-zippy span{color:#00c;text-decoration:underline;cursor:pointer;margin:0 4px}.goog-te-balloon-form{margin:6px 0 0 0}.goog-te-balloon-form form{margin:0}.goog-te-balloon-form form textarea{margin-bottom:4px;width:100%}.goog-te-balloon-footer{margin:6px 0 4px 0}.goog-te-spinner-pos{z-index:1000;position:fixed;transition-delay:0.6s;left:-1000px;top:-1000px}.goog-te-spinner-animation{background:#ccc;display:flex;align-items:center;justify-content:center;width:104px;height:104px;border-radius:50px;background:#fff url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=) 50% 50% no-repeat;transition:all 0.6s ease-in-out;transform:scale(0.4);opacity:0}.goog-te-spinner-animation-show{transform:scale(0.5);opacity:1}.goog-te-spinner{margin:2px 0 0 2px;animation:goog-te-spinner-rotator 1.4s linear infinite}@keyframes goog-te-spinner-rotator{0%{transform:rotate(0deg)}100%{transform:rotate(270deg)}}.goog-te-spinner-path{stroke-dasharray:187;stroke-dashoffset:0;stroke:#4285f4;transform-origin:center;animation:goog-te-spinner-dash 1.4s ease-in-out infinite}@keyframes goog-te-spinner-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}100%{stroke-dashoffset:187;transform:rotate(450deg)}}#goog-gt-tt html,#goog-gt-tt body,#goog-gt-tt div,#goog-gt-tt span,#goog-gt-tt iframe,#goog-gt-tt h1,#goog-gt-tt h2,#goog-gt-tt h3,#goog-gt-tt h4,#goog-gt-tt h5,#goog-gt-tt h6,#goog-gt-tt p,#goog-gt-tt a,#goog-gt-tt img,#goog-gt-tt ol,#goog-gt-tt ul,#goog-gt-tt li,#goog-gt-tt table,#goog-gt-tt form,#goog-gt-tt tbody,#goog-gt-tt tr,#goog-gt-tt td{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;text-align:left;line-height:normal}#goog-gt-tt ol,#goog-gt-tt ul{list-style:none}#goog-gt-tt table{border-collapse:collapse;border-spacing:0}#goog-gt-tt caption,#goog-gt-tt th,#goog-gt-tt td{text-align:left;font-weight:normal}#goog-gt-tt input::-moz-focus-inner{border:0}div#goog-gt-tt{padding:10px 14px}#goog-gt-tt{color:#222;background-color:#ffffff;border:1px solid #eee;box-shadow:0 4px 16px rgba(0,0,0,.2);-moz-box-shadow:0 4px 16px rgba(0,0,0,.2);-webkit-box-shadow:0 4px 16px rgba(0,0,0,.2);display:none;font-family:arial;font-size:10pt;width:420px;padding:12px;position:absolute;z-index:10000}#goog-gt-tt .original-text,.gt-hl-layer{clear:both;font-size:10pt;position:relative;text-align:justify;width:100%}#goog-gt-tt .title{color:#999;font-family:arial,sans-serif;margin:4px 0;text-align:left}#goog-gt-tt .close-button{display:none}#goog-gt-tt .logo{float:left;margin:0px}#goog-gt-tt .activity-links{display:inline-block}#goog-gt-tt .started-activity-container{display:none;width:100%}#goog-gt-tt .activity-root{margin-top:20px}#goog-gt-tt .left{float:left}#goog-gt-tt .right{float:right}#goog-gt-tt .bottom{min-height:15px;position:relative;height:1%}#goog-gt-tt .status-message{background:-moz-linear-gradient(top,#29910d 0%,#20af0e 100%);background:-webkit-linear-gradient(top,#29910d 0%,#20af0e 100%);background:-o-linear-gradient(top,#29910d 0%,#20af0e 100%);background:-ms-linear-gradient(top,#29910d 0%,#20af0e 100%);background:linear-gradient(top,#29910d 0%,#20af0e 100%);background:#29910d;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-shadow:inset 0px 2px 2px #1e6609;-moz-box-shadow:inset 0px 2px 2px #1e6609;-webkit-box-shadow:inset 0px 2px 2px #1e6609;color:white;font-size:9pt;font-weight:bolder;margin-top:12px;padding:6px;text-shadow:1px 1px 1px #1e6609}#goog-gt-tt .activity-link{color:#1155cc;cursor:pointer;font-family:arial;font-size:11px;margin-right:15px;text-decoration:none}#goog-gt-tt textarea{font-family:arial;resize:vertical;width:100%;margin-bottom:10px;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;border:1px solid #d9d9d9;border-top:1px solid silver;font-size:13px;height:auto;overflow-y:auto;padding:1px}#goog-gt-tt textarea:focus{-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,0.3);box-shadow:inset 0 1px 2px rgba(0,0,0,0.3);border:1px solid #4d90fe;outline:none}#goog-gt-tt .activity-cancel{margin-right:10px}#goog-gt-tt .translate-form{min-height:25px;vertical-align:middle;padding-top:8px}#goog-gt-tt .translate-form .activity-form{margin-bottom:5px;margin-bottom:0px}#goog-gt-tt .translate-form .activity-form input{display:inline-block;min-width:54px;*min-width:70px;border:1px solid #dcdcdc;border:1px solid rgba(0,0,0,0.1);text-align:center;color:#444;font-size:11px;font-weight:bold;height:27px;outline:0;padding:0 8px;vertical-align:middle;line-height:27px;margin:0 16px 0 0;box-shadow:0 1px 2px rgba(0,0,0,.1);-moz-box-shadow:0 1px 2px rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-transition:all 0.218s;-moz-transition:all 0.218s;-o-transition:all 0.218s;transition:all 0.218s;background-color:#f5f5f5;background-image:-webkit-gradient(linear,left top,left bottom,from(#f5f5f5),to(#f1f1f1));background-image:-webkit-linear-gradient(top,#f5f5f5,#f1f1f1);background-image:-moz-linear-gradient(top,#f5f5f5,#f1f1f1);background-image:-ms-linear-gradient(top,#f5f5f5,#f1f1f1);background-image:-o-linear-gradient(top,#f5f5f5,#f1f1f1);background-image:linear-gradient(top,#f5f5f5,#f1f1f1);-webkit-user-select:none;-moz-user-select:none;cursor:default}#goog-gt-tt .translate-form .activity-form input:hover{border:1px solid #c6c6c6;color:#222;-webkit-transition:all 0.0s;-moz-transition:all 0.0s;-o-transition:all 0.0s;transition:all 0.0s;background-color:#f8f8f8;background-image:-webkit-gradient(linear,left top,left bottom,from(#f8f8f8),to(#f1f1f1));background-image:-webkit-linear-gradient(top,#f8f8f8,#f1f1f1);background-image:-moz-linear-gradient(top,#f8f8f8,#f1f1f1);background-image:-ms-linear-gradient(top,#f8f8f8,#f1f1f1);background-image:-o-linear-gradient(top,#f8f8f8,#f1f1f1);background-image:linear-gradient(top,#f8f8f8,#f1f1f1)}#goog-gt-tt .translate-form .activity-form input:active{border:1px solid #c6c6c6;color:#333;background-color:#f6f6f6;background-image:-webkit-gradient(linear,left top,left bottom,from(#f6f6f6),to(#f1f1f1));background-image:-webkit-linear-gradient(top,#f6f6f6,#f1f1f1);background-image:-moz-linear-gradient(top,#f6f6f6,#f1f1f1);background-image:-ms-linear-gradient(top,#f6f6f6,#f1f1f1);background-image:-o-linear-gradient(top,#f6f6f6,#f1f1f1);background-image:linear-gradient(top,#f6f6f6,#f1f1f1)}#goog-gt-tt .translate-form .activity-form input:focus #goog-gt-tt .translate-form .activity-form input.focus #goog-gt-tt .translate-form .activity-form input:active,#goog-gt-tt .translate-form .activity-form input:focus:active,#goog-gt-tt .translate-form .activity-form input:.focus:active{box-shadow:inset 0 0 0 1px rgba(255,255,255,0.5);-webkit-box-shadow:inset 0 0 0 1px rgba(255,255,255,0.5);-moz-box-shadow:inset 0 0 0 1px rgba(255,255,255,0.5)}#goog-gt-tt .translate-form .activity-form input:focus,#goog-gt-tt .translate-form .activity-form input.focus{outline:none;border:1px solid #4d90fe;z-index:4!important}#goog-gt-tt .translate-form .activity-form input.selected{background-color:#eeeeee;background-image:-webkit-gradient(linear,left top,left bottom,from(#eeeeee),to(#e0e0e0));background-image:-webkit-linear-gradient(top,#eeeeee,#e0e0e0);background-image:-moz-linear-gradient(top,#eeeeee,#e0e0e0);background-image:-ms-linear-gradient(top,#eeeeee,#e0e0e0);background-image:-o-linear-gradient(top,#eeeeee,#e0e0e0);background-image:linear-gradient(top,#eeeeee,#e0e0e0);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);border:1px solid #ccc;color:#333}#goog-gt-tt .translate-form .activity-form input.activity-submit{color:white;border-color:#3079ed;background-color:#4d90fe;background-image:-webkit-gradient(linear,left top,left bottom,from(#4d90fe),to(#4787ed));background-image:-webkit-linear-gradient(top,#4d90fe,#4787ed);background-image:-moz-linear-gradient(top,#4d90fe,#4787ed);background-image:-ms-linear-gradient(top,#4d90fe,#4787ed);background-image:-o-linear-gradient(top,#4d90fe,#4787ed);background-image:linear-gradient(top,#4d90fe,#4787ed)}#goog-gt-tt .translate-form .activity-form input.activity-submit:hover #goog-gt-tt .translate-form .activity-form input.activity-submit:focus,#goog-gt-tt .translate-form .activity-form input.activity-submit.focus #goog-gt-tt .translate-form .activity-form input.activity-submit:active{border-color:#3079ed;background-color:#357ae8;background-image:-webkit-gradient(linear,left top,left bottom,from(#4d90fe),to(#357ae8));background-image:-webkit-linear-gradient(top,#4d90fe,#357ae8);background-image:-moz-linear-gradient(top,#4d90fe,#357ae8);background-image:-ms-linear-gradient(top,#4d90fe,#357ae8);background-image:-o-linear-gradient(top,#4d90fe,#357ae8);background-image:linear-gradient(top,#4d90fe,#357ae8)}#goog-gt-tt .translate-form .activity-form input.activity-submit:hover{box-shadow:inset 0 0 0 1px #fff,0px 1px 1px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0 0 0 1px #fff,0px 1px 1px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 0 0 1px #fff,0px 1px 1px rgba(0,0,0,0.1)}#goog-gt-tt .translate-form .activity-form input:focus,#goog-gt-tt .translate-form .activity-form input.focus,#goog-gt-tt .translate-form .activity-form input:active,#goog-gt-tt .translate-form .activity-form input:hover,#goog-gt-tt .translate-form .activity-form input.activity-submit:focus,#goog-gt-tt .translate-form .activity-form input.activity-submit.focus,#goog-gt-tt .translate-form .activity-form input.activity-submit:active,#goog-gt-tt .translate-form .activity-form input.activity-submit:hover{border-color:#3079ed}#goog-gt-tt .gray{color:#999;font-family:arial,sans-serif}#goog-gt-tt .alt-helper-text{color:#999;font-size:11px;font-family:arial,sans-serif;margin:15px 0px 5px 0px}#goog-gt-tt .alt-error-text{color:#800;display:none;font-size:9pt}.goog-text-highlight{background-color:#c9d7f1;-webkit-box-shadow:2px 2px 4px #9999aa;-moz-box-shadow:2px 2px 4px #9999aa;box-shadow:2px 2px 4px #9999aa;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;position:relative}#goog-gt-tt .alt-menu.goog-menu{background:#ffffff;border:1px solid #dddddd;-webkit-box-shadow:0px 3px 3px #888;-moz-box-shadow:0px 2px 20px #888;box-shadow:0px 2px 4px #99a;min-width:0;outline:none;padding:0;position:absolute;z-index:2000}#goog-gt-tt .alt-menu .goog-menuitem{cursor:pointer;padding:2px 5px 5px;margin-right:0px;border-style:none}#goog-gt-tt .alt-menu div.goog-menuitem:hover{background:#ddd}#goog-gt-tt .alt-menu .goog-menuitem h1{font-size:100%;font-weight:bold;margin:4px 0px}#goog-gt-tt .alt-menu .goog-menuitem strong{color:#345aad}#goog-gt-tt .goog-submenu-arrow{text-align:right;position:absolute;right:0;left:auto}#goog-gt-tt .goog-menuitem-rtl .goog-submenu-arrow{text-align:left;position:absolute;left:0;right:auto}#goog-gt-tt .gt-hl-text,#goog-gt-tt .trans-target-highlight{background-color:#f1ea00;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;-moz-box-shadow:rgba(0,0,0,.5) 3px 3px 4px;-webkit-box-shadow:rgba(0,0,0,.5) 3px 3px 4px;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;color:#f1ea00;cursor:pointer;margin:-2px -2px -2px -3px;padding:2px 2px 2px 3px;position:relative}#goog-gt-tt .trans-target-highlight{color:#222}#goog-gt-tt .gt-hl-layer{color:white;position:absolute!important}#goog-gt-tt .trans-target,#goog-gt-tt .trans-target .trans-target-highlight{background-color:#c9d7f1;border-radius:4px 4px 0px 0px;-webkit-border-radius:4px 4px 0px 0px;-moz-border-radius:4px 4px 0px 0px;-moz-box-shadow:rgba(0,0,0,.5) 3px 3px 4px;-webkit-box-shadow:rgba(0,0,0,.5) 3px 3px 4px;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;cursor:pointer;margin:-2px -2px -2px -3px;padding:2px 2px 3px 3px;position:relative}#goog-gt-tt span:focus{outline:none}#goog-gt-tt .trans-edit{background-color:transparent;border:1px solid #4d90fe;border-radius:0em;-webkit-border-radius:0em;-moz-border-radius:0em;margin:-2px;padding:1px}#goog-gt-tt .gt-trans-highlight-l{border-left:2px solid red;margin-left:-2px}#goog-gt-tt .gt-trans-highlight-r{border-right:2px solid red;margin-right:-2px}#goog-gt-tt #alt-input{padding:2px}#goog-gt-tt #alt-input-text{font-size:11px;padding:2px 2px 3px;margin:0;background-color:#fff;color:#333;border:1px solid #d9d9d9;border-top:1px solid #c0c0c0;display:inline-block;vertical-align:top;height:21px;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-border-radius:1px}#goog-gt-tt #alt-input-text:hover{border:1px solid #b9b9b9;border-top:1px solid #a0a0a0;-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1)}#goog-gt-tt #alt-input-text:focus{-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);outline:none;border:1px solid #4d90fe}#goog-gt-tt #alt-input-submit{font-size:11px;padding:2px 6px 3px;margin:0 0 0 2px;height:21px}.goog-te-spinner-pos, #goog-gt-tt {display: none;}</style></head><body>
    <div class="related" role="navigation" aria-label="navigation connexe">
      <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La navigation</font></font></h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="https://flask.palletsprojects.com/en/3.0.x/genindex/" title="Indice général" accesskey="I"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indice</font></font></a></li>
        <li class="right">
          <a href="https://flask.palletsprojects.com/en/3.0.x/py-modindex/" title="Index du module Python"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modules</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |</font></font></li>
        <li class="right">
          <a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/views/" title="Plans et vues" accesskey="N"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suivant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |</font></font></li>
        <li class="right">
          <a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/factory/" title="Configuration de l&#39;application" accesskey="P"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">précédent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |</font></font></li>
        <li class="nav-item nav-item-0"><a href="https://flask.palletsprojects.com/en/3.0.x/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation en flacon ( 3.0.x )</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »</font></font></li>
          <li class="nav-item nav-item-1"><a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/" accesskey="U"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutoriel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »</font></font></li>
        <li class="nav-item nav-item-this"><a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définir et accéder à la base de données</font></font></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="define-and-access-the-database">
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définir et accéder à la base de données</font></font><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#define-and-access-the-database" title="Lien vers cette rubrique"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h1>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'application utilisera un </font></font><a class="reference external" href="https://sqlite.org/about.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQLite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> base de données pour stocker les utilisateurs et les publications.
Python est livré avec un support intégré pour SQLite dans le </font></font><a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="( dans Python v3.12 )"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
module.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQLite est pratique car il ne nécessite pas la configuration d'un
serveur de base de données et est intégré à Python. Toutefois, si concourant
les requêtes essaient d'écrire dans la base de données en même temps, elles ralentissent
vers le bas, chaque écriture se produit séquentiellement. Petites applications won’t
ceci. Une fois que vous devenez grand, vous voudrez peut-être passer à un autre
base.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le tutoriel ne va pas en détail sur SQL. Si vous n'êtes pas familier
avec elle, les documents SQLite décrivent le </font></font><a class="reference external" href="https://sqlite.org/lang.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">langue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
<section id="connect-to-the-database">
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se connecter à la base de données</font></font><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#connect-to-the-database" title="Lien vers cette rubrique"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La première chose à faire lorsque vous travaillez avec une base de données SQLite (et
d'autres bibliothèques de bases de données Python) est de créer une connexion à elle. N'importe quel
les requêtes et les opérations sont effectuées en utilisant la connexion, qui est
fermé après la fin des travaux.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans les applications Web, cette connexion est généralement liée à la demande. Il
est créé à un moment donné lors du traitement d'une demande, et fermé avant
réponse est envoyée.</font></font></p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">flaskr/db.py</span></code></span><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#id1" title="Lien vers ce code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span><span class="p">,</span> <span class="n">g</span>


<span class="k">def</span> <span class="nf">get_db</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">'db'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">current_app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'DATABASE'</span><span class="p">],</span>
            <span class="n">detect_types</span><span class="o">=</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">PARSE_DECLTYPES</span>
        <span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Row</span>

    <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">db</span>


<span class="k">def</span> <span class="nf">close_db</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'db'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">db</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.g" title="flask.g"><code class="xref py py-data docutils literal notranslate"><span class="pre">g</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un objet spécial qui est unique pour chaque demande. Il est
utilisé pour stocker des données qui pourraient être accessibles par plusieurs fonctions pendant
la demande. La connexion est stockée et réutilisée au lieu de créer un
nouvelle connexion si </font></font><code class="docutils literal notranslate"><span class="pre">get_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est appelé une deuxième fois dans le même
demande.</font></font></p>
<p><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal notranslate"><span class="pre">current_app</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un autre objet spécial qui pointe vers le Flask
application traitant la demande. Puisque vous avez utilisé une usine d'application, vous,
il n'y a pas d'objet d'application lors de l'écriture du reste de votre code.
</font></font><code class="docutils literal notranslate"><span class="pre">get_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sera appelé lorsque l'application a été créée et est
traiter une demande, donc </font></font><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal notranslate"><span class="pre">current_app</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut être utilisé.</font></font></p>
<p><a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#sqlite3.connect" title="( dans Python v3.12 )"><code class="xref py py-func docutils literal notranslate"><span class="pre">sqlite3.connect()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> établit une connexion au fichier pointé
par le </font></font><code class="docutils literal notranslate"><span class="pre">DATABASE</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clé de configuration. Ce fichier ne doit pas nécessairement exister
pourtant, et won’t jusqu'à ce que vous initialisiez la base de données plus tard.</font></font></p>
<p><a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Row" title="( dans Python v3.12 )"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Row</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indique à la connexion de renvoyer les lignes qui se comportent
comme des dicts. Cela permet d'accéder aux colonnes par nom.</font></font></p>
<p><code class="docutils literal notranslate"><span class="pre">close_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vérifie si une connexion a été créée en vérifiant si </font></font><code class="docutils literal notranslate"><span class="pre">g.db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
était réglé. Si la connexion existe, elle est fermée. Plus bas, vous
parlez de votre candidature </font></font><code class="docutils literal notranslate"><span class="pre">close_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonction dans l'application
usine pour qu'elle soit appelée après chaque demande.</font></font></p>
</section>
<section id="create-the-tables">
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer les tables</font></font><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#create-the-tables" title="Lien vers cette rubrique"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans SQLite, les données sont stockées dans </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tables</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colonnes</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ceux-ci doivent être
créé avant de pouvoir stocker et récupérer des données. Flaskr stockera les utilisateurs
dans le </font></font><code class="docutils literal notranslate"><span class="pre">user</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tableau et postes dans le </font></font><code class="docutils literal notranslate"><span class="pre">post</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> table. Créer un fichier
avec les commandes SQL nécessaires pour créer des tables vides:</font></font></p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">flaskr/schema.sql</span></code></span><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#id2" title="Lien vers ce code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="k">user</span><span class="p">;</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">post</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTOINCREMENT</span><span class="p">,</span>
<span class="w">  </span><span class="n">username</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">password</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTOINCREMENT</span><span class="p">,</span>
<span class="w">  </span><span class="n">author_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">created</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
<span class="w">  </span><span class="n">title</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">body</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">author_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajoutez les fonctions Python qui exécuteront ces commandes SQL au
</font></font><code class="docutils literal notranslate"><span class="pre">db.py</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fichier:</font></font></p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">flaskr/db.py</span></code></span><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#id3" title="Lien vers ce code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init_db</span><span class="p">():</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">current_app</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span><span class="s1">'schema.sql'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf8'</span><span class="p">))</span>


<span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s1">'init-db'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">init_db_command</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""Clear the existing data and create new tables."""</span>
    <span class="n">init_db</span><span class="p">()</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">'Initialized the database.'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.open_resource" title="flask.Flask.open_resource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open_resource()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ouvre un fichier relatif à
le </font></font><code class="docutils literal notranslate"><span class="pre">flaskr</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> paquet, qui est utile car vous ne saurez pas nécessairement
où se trouve cet emplacement lors du déploiement de l'application ultérieurement. </font></font><code class="docutils literal notranslate"><span class="pre">get_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
renvoie une connexion à la base de données, qui est utilisée pour exécuter les commandes
lire dans le fichier.</font></font></p>
<p><a class="reference external" href="https://click.palletsprojects.com/en/8.1.x/api/#click.command" title="( dans Click v8.1.x )"><code class="xref py py-func docutils literal notranslate"><span class="pre">click.command()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> définit une commande de ligne de commande appelée </font></font><code class="docutils literal notranslate"><span class="pre">init-db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
qui appelle le </font></font><code class="docutils literal notranslate"><span class="pre">init_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonctionne et affiche un message de réussite à la
utilisateur. Tu peux lire </font></font><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/cli/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface de ligne de commande</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour en savoir plus sur l'écriture de commandes.</font></font></p>
</section>
<section id="register-with-the-application">
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inscrivez-vous avec l'application</font></font><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#register-with-the-application" title="Lien vers cette rubrique"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le </font></font><code class="docutils literal notranslate"><span class="pre">close_db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><code class="docutils literal notranslate"><span class="pre">init_db_command</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les fonctions doivent être enregistrées
avec l'instance d'application; sinon, ils seront utilisés par le
application. Cependant, puisque you’re utilise une fonction factory, cela
instance is’t est disponible lors de l'écriture des fonctions. Au lieu de cela, écrivez un
fonction qui prend une application et fait l'enregistrement.</font></font></p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">flaskr/db.py</span></code></span><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#id4" title="Lien vers ce code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">teardown_appcontext</span><span class="p">(</span><span class="n">close_db</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">init_db_command</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.teardown_appcontext" title="flask.Flask.teardown_appcontext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.teardown_appcontext()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raconte
Flacon pour appeler cette fonction lors du nettoyage après le retour de la
réponse.</font></font></p>
<p><a class="reference external" href="https://click.palletsprojects.com/en/8.1.x/api/#click.Group.add_command" title="( dans Click v8.1.x )"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.cli.add_command()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ajoute un nouveau
commande qui peut être appelée avec le </font></font><code class="docutils literal notranslate"><span class="pre">flask</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commandement.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importez et appelez cette fonction depuis l'usine. Placez le nouveau code à
la fin de la fonction d'usine avant de retourner l'application.</font></font></p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">flaskr/__init__.py</span></code></span><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#id5" title="Lien vers ce code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_app</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="o">...</span>
    <span class="c1"># existing code omitted</span>

    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">db</span>
    <span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>
</pre></div>
</div>
</div>
</section>
<section id="initialize-the-database-file">
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialiser le Fichier de base de données</font></font><a class="headerlink" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#initialize-the-database-file" title="Lien vers cette rubrique"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant que </font></font><code class="docutils literal notranslate"><span class="pre">init-db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a été enregistré avec l'application, il peut être appelé
en utilisant le </font></font><code class="docutils literal notranslate"><span class="pre">flask</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commande, semblable à la </font></font><code class="docutils literal notranslate"><span class="pre">run</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commande de la
page précédente.</font></font></p>
<div class="admonition note">
<p class="admonition-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous utilisez toujours le serveur à partir de la page précédente, vous pouvez
arrêtez le serveur ou exécutez cette commande dans un nouveau terminal. Si
si vous utilisez un nouveau terminal, n'oubliez pas de modifier le répertoire de votre projet
et activez l'env comme décrit dans </font></font><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/installation/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exécutez le </font></font><code class="docutils literal notranslate"><span class="pre">init-db</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commande:</font></font></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ flask --app flaskr init-db
Initialized the database.
</pre></div>
</div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y aura maintenant un </font></font><code class="docutils literal notranslate"><span class="pre">flaskr.sqlite</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fichier dans le </font></font><code class="docutils literal notranslate"><span class="pre">instance</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dossier dans
votre projet.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuer à </font></font><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/views/"><span class="doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans et Vues</font></font></span></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
</section>
</section>


            <div class="clearer"></div>
          <div id="rtd-sidebar" data-ea-publisher="readthedocs" data-ea-type="readthedocs-sidebar" data-ea-manual="true" class="ethical-alabaster"></div></div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="navigation principale">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="https://flask.palletsprojects.com/en/3.0.x/">
              <img class="logo" src="./3Définir et accéder à la base de données_files/flask-vertical.webp" alt="Logo">
            </a></p>
  

  <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenu</font></font></h3>
  <ul>
<li><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définir et accéder à la base de données</font></font></a><ul>
<li><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#connect-to-the-database"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se connecter à la base de données</font></font></a></li>
<li><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#create-the-tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer les Tables</font></font></a></li>
<li><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#register-with-the-application"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inscrivez-vous à l'application</font></font></a></li>
<li><a class="reference internal" href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/#initialize-the-database-file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialiser le Fichier de base de données</font></font></a></li>
</ul>
</li>
</ul>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La navigation</font></font></h3>
<ul>
  <li><a href="https://flask.palletsprojects.com/en/3.0.x/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aperçu</font></font></a>
    <ul>
      <li><a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutoriel</font></font></a>
        <ul>
          <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Précédent: </font></font><a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/factory/" title="chapitre précédent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de l'Application</font></font></a>
          </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant: </font></font><a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/views/" title="chapitre suivant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans et Vues</font></font></a></li></ul>
      </li>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: block;" role="search">
  <h3 id="searchlabel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherche rapide</font></font></h3>
    <div class="searchformwrapper">
    <form class="search" action="https://flask.palletsprojects.com/en/3.0.x/search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
      <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><input type="submit" value="Aller"></font></font>
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    © Copyright 2010 Palettes.
      Créé en utilisant </font></font><a href="https://www.sphinx-doc.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sphinx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7.2.6.
    </font></font></div>
  <script src="./3Définir et accéder à la base de données_files/version_warning_offset.js.téléchargement"></script>

  
<!-- Inserted RTD Footer -->

<div class="injected">

  
  <div class="rst-versions rst-badge" data-toggle="rst-versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book">&nbsp;</span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      v: 3.0.x
      </font></font><span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      

      
      
      <dl>
        <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langues</font></font></dt>

        

        <dd class="rtd-current-item">
          <a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en</font></font></a>
        </dd>

        
        
        
        
        
        <dd>
          <a href="https://flask.palletsprojects.com/es/main/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es</font></font></a>
        </dd>
        
        
        
        
        
        <dd>
          <a href="https://flask.palletsprojects.com/fa/latest/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fa</font></font></a>
        </dd>
        
        
        

      </dl>
      
      
      <dl>
        <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versions</font></font></dt>
        
        <dd>
          <a href="https://flask.palletsprojects.com/en/latest/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dernier</font></font></a>
        </dd>
        
        <dd class="rtd-current-item">
          <a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.0.x</font></font></a>
        </dd>
        
        <dd>
          <a href="https://flask.palletsprojects.com/en/2.3.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3.x</font></font></a>
        </dd>
        
        <dd>
          <a href="https://flask.palletsprojects.com/en/2.2.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.x</font></font></a>
        </dd>
        
        <dd>
          <a href="https://flask.palletsprojects.com/en/2.1.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.x</font></font></a>
        </dd>
        
        <dd>
          <a href="https://flask.palletsprojects.com/en/2.0.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.0.x</font></font></a>
        </dd>
        
        <dd>
          <a href="https://flask.palletsprojects.com/en/1.1.x/tutorial/database/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1.x</font></font></a>
        </dd>
        
      </dl>
      
      

      
      
      

      
      <dl>
        
        <!-- These are kept as relative links for internal installs that are http -->
        <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur Read the Docs</font></font></dt>
        <dd>
          <a href="https://readthedocs.org/projects/flask/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accueil du projet</font></font></a>
        </dd>
        <dd>
          <a href="https://readthedocs.org/projects/flask/builds/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compilations</font></font></a>
        </dd>
        <dd>
          <a href="https://readthedocs.org/projects/flask/downloads/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compléments</font></font></a>
        </dd>
      </dl>
      

      

      
      <dl>
        <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur GitHub</font></font></dt>
        <dd>
          <a href="https://github.com/pallets/flask/blob/3.0.x/docs/tutorial/database.rst"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir</font></font></a>
        </dd>
        
        <dd>
          <a href="https://github.com/pallets/flask/edit/3.0.x/docs/tutorial/database.rst"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modificateur</font></font></a>
        </dd>
        
      </dl>
      
      

      
      <dl>
        <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherche</font></font></dt>
        <dd>
          <div style="padding: 6px;">
            
            <form id="flyout-search-form" class="wy-form" target="_blank" action="https://readthedocs.org/projects/flask/search/" method="get">
              <input type="text" name="q" aria-label="Chercher dans la doc" placeholder="Chercher dans la doc">
              </form>
          </div>
        </dd>
      </dl>
      

      <hr>

      
        <small>
          <span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hégergé par </font></font><a href="https://readthedocs.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lire les documents</font></font></a></span>
          <span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> · </font></font></span>
          <a href="https://docs.readthedocs.io/page/privacy-policy.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique de confidentialité</font></font></a>
        </small>
      

      
    </div>
  </div>
  

</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>